{
  "question_id": "Q2",
  "focus": "确定构建、测试与开发运行命令的依据。",
  "reason_for_investigation": "贡献者指南必须提供可执行的 build/test/run 命令，但仓库尚无脚本，需要依据需求文档推导。",
  "evidence": [
    {
      "file": "项目需求.md",
      "lines": "387-428",
      "quote": "部署方案依赖 Docker，本地需要同时启动 kb-api、kb-worker、db、vectordb、object、queue、mcp-server。说明了关键环境变量与启动顺序。",
      "implication": "指南可要求统一使用 `docker compose`（或 make 封装）来构建与运行所有服务，确保依赖就绪。"
    },
    {
      "file": "项目需求.md",
      "lines": "461-522",
      "quote": "验收用例与可用性校验列出上传→解析→检索→MCP 联调等场景，强调健康检查与端到端验证。",
      "implication": "测试命令需要覆盖单元（解析/检索）、集成（worker+向量库）、以及端到端场景，可通过 `pytest` + `docker compose exec` 或 `make e2e` 触发。"
    }
  ],
  "findings": [
    "可定义 `make build`（构建镜像）、`make dev`（docker compose up）、`make test`（运行 pytest + worker 单元测试）、`make e2e`（执行验收脚本）。",
    "指南需提醒贡献者在运行测试前执行 `docker compose pull`/`docker compose up -d db vectordb object queue` 以满足依赖。",
    "端到端验证需在 `tests/e2e` 内提供脚本，调用文档列出的用例（上传多模态文件、自然语言检索、MCP 整合）。"
  ],
  "conclusion": "AGENTS.md 中将强调所有开发命令通过 Makefile 包装 docker compose，测试覆盖单元 + e2e，并参考文档的验收条目。"
}
