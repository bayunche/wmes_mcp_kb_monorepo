{
  "timestamp": "2025-11-27T11:20:00+08:00",
  "known": [
    "迁移 0008/0010 已设计将 provider check 扩展到 openai/ollama/local，但旧库若未跑到这些版本会保留旧约束。",
    "ModelProviderSchema/前端/脚本都只允许 openai、ollama、local；写入 local 时若数据库未更新会直接 500。",
    "run-migrations.ts 每次全量重放 SQL，需要迁移幂等以修复历史数据库。",
    "logs/dev/api.log 多次记录 PUT /model-settings 500，指向 model_settings_provider_check 违例。"
  ],
  "questions": [
    {
      "id": "Q48",
      "question": "当前数据库中 model_settings_provider_check 是否仍缺少 local？需要新增一次幂等迁移强制修复吗？",
      "priority": "high",
      "blocking": true
    },
    {
      "id": "Q49",
      "question": "是否应直接移除 provider check 或扩展为更宽松的枚举（以避免未来新增 provider 再次 500）？",
      "priority": "medium",
      "blocking": false
    },
    {
      "id": "Q50",
      "question": "需要补哪类验证（脚本/测试）来确保迁移执行后不再出现约束不一致的 500？",
      "priority": "medium",
      "blocking": false
    }
  ]
}
