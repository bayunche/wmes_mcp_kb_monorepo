{
  "timestamp": "2025-11-27T00:26:31",
  "module_locations": [
    "apps/api/src",
    "apps/worker/src",
    "apps/mcp/src",
    "apps/web/src",
    "packages/core",
    "packages/data",
    "packages/shared-schemas",
    "scripts",
    "ops/scripts",
    "docs/ingestion.md",
    "docs/retrieval.md",
    "项目需求.md"
  ],
  "current_state": {
    "pipeline": "架构齐备：上传 -> 解析/OCR -> LLM 语义切分 -> 元数据 -> 向量化 -> 入库 -> 混合检索/MCP，但现状未完成端到端可运行校验，环境与依赖未配置。",
    "services": "API/Worker/MCP/Web 均有入口与脚本 deploy-local.sh/docker compose，需准备 Postgres+pgvector/Qdrant/MinIO/Redis/RabbitMQ 和本地模型。",
    "models": "要求本地嵌入与 rerank 模型（Xenova/bge-*），需同步 MODELS_DIR 或通过 scripts/sync-models.ts 下载。",
    "tests": "仓库包含 Vitest 单测与 scripts/test-matrix.ts 冒烟，但多次记录在当前环境因 Bun/依赖/容器缺失无法运行。",
    "docs": "README 与 项目需求.md 定义了全链路需求与验收，需按文档落地。"
  },
  "tech_stack": "Bun+TypeScript，Postgres/pgvector、Qdrant、MinIO、Redis、RabbitMQ；LLM 切分/metadata 依赖配置的 provider，embedding 强制本地模型。",
  "tests": "目标需跑通 bun test（API/MCP/Worker）与 scripts/test-matrix.ts 冒烟；现有记录显示测试在 WSL 因 bun.exe 权限或缺依赖失败。",
  "observations": [
    "必须准备 .env/.env.docker，运行迁移、初始化存储与模型；当前未确认任何服务可正常启动。",
    "需评估 shrimp-task-manager 是否可用；此前命令缺失，需要自行规划。",
    "已有大量未提交修改，需谨慎避免回退用户变更。"
  ]
}
